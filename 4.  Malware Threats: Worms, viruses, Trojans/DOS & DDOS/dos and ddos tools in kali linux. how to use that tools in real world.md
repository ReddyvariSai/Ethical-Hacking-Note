# **DoS/DDoS Tools in Kali Linux: Legal Usage Guide**

## **⚠️ STRONG LEGAL DISCLAIMER FIRST**
**Using these tools against systems you don't own or without explicit written permission is:
1. ILLEGAL (Computer Fraud and Abuse Act, similar laws worldwide)
2. Unethical
3. Can result in: Criminal charges, Fines ($250K+), Imprisonment (10+ years), Permanent criminal record**

**Only use these in:**
- Your own lab (isolated, no internet)
- Authorized penetration tests (with signed contract)
- Bug bounty programs (within scope rules)
- CTF competitions (organized events)

---

## **KALI LINUX DOS/DDOS TOOLS OVERVIEW**

### **1. Stress Testing & Benchmarking Tools**
*Legitimate purposes: Testing your own servers' capacity*

#### **a) ApacheBench (ab)**
```bash
# Install
sudo apt install apache2-utils

# Test YOUR OWN web server (192.168.1.100)
ab -n 1000 -c 10 http://192.168.1.100/
# -n: Total requests
# -c: Concurrent connections

# Real-world usage: 
# 1. Before deploying a web app
# 2. Testing load balancer configuration
# 3. Capacity planning

# Example: Find max requests per second
ab -n 5000 -c 100 -k http://localhost/test-page/
# Results show: Requests per second, time per request
```

#### **b) Siege**
```bash
# Install
sudo apt install siege

# Test YOUR server
siege -c 100 -t 30s http://192.168.1.100
# -c: Concurrent users
# -t: Time duration

# With URLs file (simulate real user patterns)
echo "http://localhost/home" > urls.txt
echo "http://localhost/login" >> urls.txt
siege -c 50 -t 1M -f urls.txt
```

### **2. Protocol Testing Tools**
#### **a) hping3**
```bash
# Install
sudo apt install hping3

# LEGAL USES:
# 1. Test firewall rules (YOUR firewall)
# 2. Test IDS/IPS detection
# 3. Network troubleshooting

# Test your firewall's SYN flood protection
hping3 -S -p 80 --flood 192.168.1.1
# Stop with Ctrl+C after 2-3 seconds in lab

# Fragment testing (check MTU issues)
hping3 -f -p 80 192.168.1.1

# Custom packet creation (learning)
hping3 -c 5 -S -p 80 -w 64 -O my_tcp_flags 192.168.1.1
```

#### **b) Nmap (for stress testing)**
```bash
# Nmap can be used for legitimate stress testing
# Test your IDS with fragmented packets
nmap -f -sS -p 1-100 192.168.1.1

# Test with decoys (check logging)
nmap -D RND:10 192.168.1.1
```

### **3. Slow Attack Tools**
#### **a) slowhttptest**
```bash
# Install
sudo apt install slowhttptest

# LEGAL USE: Test YOUR web server's slow attack resilience
# Test Slowloris attack
slowhttptest -c 1000 -H -g -o slowloris_report -i 10 -r 200 -t GET -u http://192.168.1.100 -x 24 -p 3

# Test Slow POST attack  
slowhttptest -c 1000 -B -g -o slowpost_report -i 110 -r 200 -s 8192 -t FAKEVERB -u http://192.168.1.100/login -x 10 -p 3

# Parameters explained:
# -c: Connections
# -H: Slowloris mode
# -B: Slow POST mode
# -u: URL (YOUR SERVER ONLY)
# -g: Generate report
```

#### **b) R-U-Dead-Yet (RUDY)**
```python
# Often used in penetration tests
# Test application timeout handling
# Example (conceptual):
# python rudy.py --target http://192.168.1.100/form --method POST --length 1000000
```

### **4. Application Layer Testing**
#### **a) GoldenEye**
```bash
# Install
git clone https://github.com/jseidl/GoldenEye.git
cd GoldenEye

# Test YOUR web server
python goldeneye.py http://192.168.1.100 -w 10 -s 10
# -w: Workers
# -s: Sockets per worker

# Example for load testing a login page
python goldeneye.py http://192.168.1.100/login -m post -u users.txt -p passwords.txt -w 5
```

#### **b) HULK (HTTP Unbearable Load King)**
```bash
# Python script for unique request generation
# Legitimate use: Stress test your web app's unique request handling

python hulk.py -u http://192.168.1.100 -t 500
# Generate 500 threads hitting your server
```

---

## **REAL-WORLD LEGAL SCENARIOS**

### **Scenario 1: Internal Penetration Test**
```bash
# You have signed contract with client to test THEIR infrastructure

# 1. Define scope in contract:
#    - IP ranges (192.168.1.0/24, webapp.company.com)
#    - Time window (Saturday 2AM-6AM)
#    - Contact person (security@company.com)

# 2. Pre-test checklist:
echo "Starting authorized pen test at $(date)" >> log.txt
echo "Scope: 192.168.1.100-192.168.1.150" >> log.txt
echo "Contact: security@client.com +1-555-1234" >> log.txt

# 3. Execute tests:
# Test web server capacity
ab -n 10000 -c 100 https://webapp.company.com/api/health

# Test slow attack resilience  
slowhttptest -c 500 -H -g -o client_report -u https://webapp.company.com -x 30

# 4. Immediate reporting of any service disruption
```

### **Scenario 2: Bug Bounty Program**
```bash
# ONLY if program explicitly allows DoS testing
# Check program rules first!

# Example for HackerOne program that allows DoS:
# 1. Read scope: *.company.com EXCEPT *.api.company.com
# 2. Rate limits: Max 10 requests/second
# 3. Time: Business hours only

# Example test:
# Limited load testing (within rate limits)
siege -c 5 -t 30s https://assets.company.com/image.jpg

# NEVER use:
# - Flood tools
# - Amplification attacks
# - Protocol attacks
```

### **Scenario 3: Your Own Lab Setup**
```bash
# SAFEST OPTION: Isolated virtual lab

# Step 1: Create isolated network in VirtualBox
# - Host-only adapter
# - No NAT, no internet

# Step 2: Set up targets
# Target 1: Ubuntu server (192.168.56.101)
# Target 2: Windows server (192.168.56.102)
# Attacker: Kali Linux (192.168.56.100)

# Step 3: Test tools safely
# On Kali:
ping 192.168.56.101  # Check connectivity
slowhttptest -c 100 -H -u http://192.168.56.101

# Step 4: Monitor and learn
# On target machine:
sudo tcpdump -i eth0 -w attack.pcap
sudo netstat -nt | grep :80
```

---

## **PROFESSIONAL PENTESTING METHODOLOGY**

### **Phase 1: Reconnaissance & Planning**
```bash
# 1. Get authorization in writing
# 2. Define success criteria
# 3. Set up monitoring/alerting
# 4. Establish communication channel

# Example: Client wants to know if their web app can handle 1000 concurrent users
# We'll test with:
# - 1000 concurrent HTTP connections for 5 minutes
# - Measure response time degradation
# - Check for crashes/memory leaks
```

### **Phase 2: Controlled Testing**
```bash
# START SMALL, THEN SCALE

# 1. Baseline performance
ab -n 100 -c 10 https://target.com
# Result: 200 req/sec baseline

# 2. Incremental load
for i in 10 50 100 200 500; do
    echo "Testing $i concurrent connections"
    ab -n 1000 -c $i https://target.com/api/test >> results.txt
    sleep 60  # Let server recover
done

# 3. Specialized tests
# Test slowloris protection
timeout 30 slowhttptest -c 100 -H -u https://target.com

# Test HTTP flood
timeout 30 python goldeneye.py https://target.com -w 20
```

### **Phase 3: Monitoring & Response**
```bash
# MONITOR THESE METRICS DURING TEST:

# On target server:
watch -n 1 "netstat -nt | grep :443 | wc -l"
watch -n 1 "top -b -n 1 | grep -E '(apache|nginx|httpd)'"
watch -n 1 "df -h /tmp"

# Network monitoring:
iftop -i eth0
nethogs eth0

# Have STOP button ready:
# 1. Kill all test processes
# 2. Contact client if issues
# 3. Document everything
```

### **Phase 4: Reporting**
```markdown
# Professional Report Template:

## Executive Summary
- Test conducted: Load testing of web application
- Duration: 2 hours
- Max load achieved: 500 concurrent users
- Findings: Server handles up to 300 concurrent users without degradation

## Technical Details
### Tools Used
1. ApacheBench (ab) - Load testing
2. slowhttptest - Slow attack simulation
3. Custom Python scripts - Traffic generation

### Test Scenarios
1. Normal load: 100 concurrent users ✓ PASS
2. High load: 500 concurrent users ⚠️ 15% performance degradation
3. Slowloris attack: 100 connections ✓ Mitigated by timeout settings

## Recommendations
1. Increase connection limit from 500 to 1000
2. Implement rate limiting per IP
3. Add DDoS protection service for layer 7 attacks
```

---

## **DANGEROUS TOOLS TO AVOID (Even in Kali)**

### **Tools That Are Almost Always Illegal to Use:**
1. **LOIC/LOTC** - Simple point-and-click attack tools
2. **HOIC** - High Orbit Ion Cannon
3. **DDoSer** - Windows-based attack tools
4. **Any amplification tools** against real systems
5. **Botnet code** (Mirai, etc.) - Even possession questionable

### **Why They're Dangerous:**
```bash
# Example: LOIC can be misconfigured to attack wrong target
# Result: You attack a hospital/911 service → Felony charges

# Example: Amplification attacks
# 1 query → 50,000x response
# Small home internet → Can take down national infrastructure
```

---

## **LEGAL ALTERNATIVES FOR LEARNING**

### **1. CTF (Capture The Flag) Platforms**
```bash
# Legal environments to practice:
# 1. HackTheBox (some machines allow DoS)
# 2. TryHackMe (specific DoS rooms)
# 3. PentesterLab (exercises)
# 4. VulnHub (vulnerable VMs)

# Example: TryHackMe "DoS" room
# They provide target VMs you're allowed to test
```

### **2. Your Own Home Lab**
```bash
# Recommended setup:
# Hardware: Old PC or Raspberry Pi 4
# Software: Proxmox/ESXi for virtualization
# Network: Physical switch, no internet connection

# Create:
# - 1x Kali Linux VM (attacker)
# - 2x Ubuntu Server VMs (targets)
# - 1x Security Onion VM (monitoring)
# - 1x pfSense VM (firewall)

# Test anything you want - 100% legal
```

### **3. Cloud Testing (Your Own Resources)**
```bash
# AWS/GCP/Azure with YOUR OWN instances
# Cost: ~$10-20 for a day of testing

# Steps:
# 1. Launch t2.micro instance (target)
# 2. Launch another instance (attacker) in same region
# 3. Configure security groups to allow traffic
# 4. Test tools
# 5. TERMINATE INSTANCES after test

# Example AWS CLI:
aws ec2 run-instances --image-id ami-abc123 --instance-type t2.micro --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=DOS-Test}]'
```

---

## **COMMAND CHEAT SHEET (Legal Use Only)**

### **Load Testing Your Server:**
```bash
# Basic load test
ab -n 10000 -c 100 http://your-server.com/

# Keep-alive connections
ab -n 5000 -c 50 -k http://your-server.com/

# POST request testing
ab -n 1000 -c 10 -p post_data.txt -T application/json http://your-server.com/api

# Siege with random delays
siege -c 100 -t 2M -d 5 http://your-server.com/
```

### **Protocol Testing Your Firewall:**
```bash
# SYN flood test (5 seconds only!)
timeout 5 hping3 -S -p 80 --flood 192.168.1.1

# UDP flood test
timeout 5 hping3 --udp -p 53 --flood 192.168.1.1

# Fragment test
hping3 -f -p 80 -c 100 192.168.1.1
```

### **Application Testing:**
```bash
# Slowloris test (30 seconds)
timeout 30 slowhttptest -c 300 -H -g -i 10 -r 200 -u http://192.168.1.100 -x 24 -p 2

# GoldenEye test
timeout 30 python goldeneye.py http://192.168.1.100 -w 10 -m get
```

---

## **WARNING SIGNS & WHEN TO STOP**

### **Immediately STOP if:**
1. Service becomes unavailable to real users
2. CPU/Memory hits 100% on production server
3. Network bandwidth saturated
4. Database connections maxed out
5. Error logs filling rapidly
6. Client requests stop

### **Emergency Stop Procedures:**
```bash
# 1. Kill all testing processes
pkill -f "ab|siege|slowhttptest|goldeneye|hping"

# 2. Block your test IP temporarily (if needed)
# On target server:
iptables -A INPUT -s YOUR_IP -j DROP

# 3. Contact client/team
echo "EMERGENCY: Test causing disruption. Stopped at $(date)" | mail -s "Test Stopped" security-team@client.com

# 4. Document what happened
echo "Issue: Apache child processes hit max. Time: $(date)" >> incident.log
```

---

## **CERTIFICATIONS & LEGAL TRAINING**

### **Get Certified (Learn Legally):**
1. **CEH (Certified Ethical Hacker)** - Covers DoS tools with ethics
2. **OSCP (Offensive Security Certified Professional)** - Hands-on in controlled labs
3. **GPEN (GIAC Penetration Tester)** - Includes DoS testing methodology
4. **CREST** - UK-based, recognized internationally

### **Key Legal Concepts to Know:**
- **Computer Fraud and Abuse Act (CFAA)** - US law
- **GDPR Article 32** - EU security requirements
- **Penetration Testing Legal Framework** - Contracts, scope, liability
- **Bug Bounty Rules** - Platform-specific guidelines

---

## **FINAL ADVICE**

1. **When in doubt, DON'T** - If you're unsure about legality, don't run the tool
2. **Get it in writing** - Always have signed authorization
3. **Start small** - Test with 1 connection before 1000
4. **Monitor constantly** - Watch target systems during tests
5. **Have a rollback plan** - Know how to stop instantly
6. **Document everything** - Logs, screenshots, communications
7. **Use isolated labs** - For learning and practice
8. **Focus on defense** - Learning to prevent DoS is more valuable than launching them

**Remember:** These tools are like surgical instruments - in the right hands (authorized professionals), they diagnose and fix problems. In the wrong hands, they cause harm and lead to serious consequences. Choose to be the professional, not the criminal.
